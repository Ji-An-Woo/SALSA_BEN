#!/usr/bin/env python3
"""
128ì°¨ì› vs ì‘ì€ ì°¨ì› ë¹„êµ ë¶„ì„
"""
import json
import numpy as np
from pathlib import Path

ROOT = Path(__file__).resolve().parents[1]
DATA_DIR = ROOT / 'data' / 'precomputed'

print("\n" + "="*80)
print("ğŸ“Š ì°¨ì›ë³„ ë°ì´í„°ì…‹ ë¹„êµ ë¶„ì„")
print("="*80)

# ë°ì´í„°ì…‹ ì •ë³´
datasets = {
    'n10': ('baseline_n10', 'idea_n10'),
    'n30': ('baseline_n30', 'idea_n30'),
    'n128': ('baseline_n128', 'idea_n128'),
}

print("\nğŸ” ê° ì°¨ì›ë³„ íŠ¹ì„±:")
print("-" * 80)
print(f"{'ì°¨ì›':^10} | {'ìƒ˜í”Œìˆ˜':^10} | {'íŒŒë¼ë¯¸í„°':^15} | {'ë¹„ë°€í‚¤í¬ê¸°':^15} | {'ì˜ˆìƒí•™ìŠµì‹œê°„':^20}")
print("-" * 80)

# í•™ìŠµ ì‹œê°„ ì¶”ì • (1M ìƒ˜í”Œ ~ 1ì‹œê°„ ê¸°ì¤€)
time_estimates = {
    10: "~30ì´ˆ",
    30: "~5ë¶„",
    128: "~30ë¶„-1ì‹œê°„",
}

for name, (baseline, idea) in datasets.items():
    baseline_path = DATA_DIR / baseline
    if baseline_path.exists():
        meta_file = baseline_path / 'meta.json'
        if meta_file.exists():
            with open(meta_file) as f:
                meta = json.load(f)
            
            n = meta['params']['n']
            m = meta['params']['m']
            s = np.array(meta['s'])
            hamming = int(np.sum(s))
            
            print(f"{n:^10} | {m:^10} | {hamming}/1s (í•´ë°) | {len(s):^15} | {time_estimates.get(n, '?'):^20}")

print("-" * 80)

print("""
âš¡ í•™ìŠµ ë³µì¡ë„ ë¶„ì„:

ì°¨ì›(n)    ë°ì´í„° í¬ê¸°    ê³„ì‚°ëŸ‰        ë©”ëª¨ë¦¬      í•™ìŠµì‹œê°„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
n=10       ~40KB        O(nÂ²m)         ~100MB      ~30ì´ˆ
n=30       ~340KB       O(nÂ²m)         ~200MB      ~5ë¶„
n=128      ~10MB        O(nÂ²m)         ~500MB      ~30ë¶„-1ì‹œê°„

âš ï¸  ì£¼ì˜í•  ì :

1ï¸âƒ£  ë°ì´í„° í¬ê¸° ì¦ê°€
   â€¢ n=10: 40KB (ë§¤ìš° ì‘ìŒ)
   â€¢ n=30: 340KB
   â€¢ n=128: 10MB (26ë°° ì¦ê°€)

2ï¸âƒ£  í•™ìŠµ ì‹œê°„ ì¦ê°€
   â€¢ n=10 ëŒ€ë¹„ n=128: ~60ë°° ëŠë¦¼
   â€¢ GPU ì‚¬ìš©ë¥ ì´ ë†’ì„ìˆ˜ë¡ ë” ë¹¨ë¼ì§

3ï¸âƒ£  ë©”ëª¨ë¦¬ ìš”êµ¬ì‚¬í•­
   â€¢ n=128: ì•½ 500MB ì´ìƒ í•„ìš”
   â€¢ RTX5070ti: 12GB VRAMìœ¼ë¡œ ì¶©ë¶„

4ï¸âƒ£  ëª¨ë¸ íŒŒë¼ë¯¸í„°
   â€¢ í¬ê¸°ê°€ ì»¤ì§ˆìˆ˜ë¡ ë” ê¹Šì€ ë„¤íŠ¸ì›Œí¬ í•„ìš”
   â€¢ ì—í­ ìˆ˜ë¥¼ ëŠ˜ë ¤ì•¼ ìˆ˜ë ´ ê°€ëŠ¥

ğŸ“ˆ í˜„ì¬ ì‹¤í–‰ êµ¬ì„±:

â”Œâ”€ Baseline n=128 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ ìƒ˜í”Œ: 10,000ê°œ                                        â”‚
â”‚ â€¢ ë¹„ë°€í‚¤: 128ì°¨ì›                                        â”‚
â”‚ â€¢ í•´ë° ë¬´ê²Œ: 3                                          â”‚
â”‚ â€¢ ëª¨ë“ˆë¡œ: 842,779                                        â”‚
â”‚ â€¢ í¬ê¸°: ~10MB                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ IDEA (obfuscated) n=128 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ ë¹„ë°€í‚¤ ë‚œë…í™”: Maclaurin ë‹¤í•­ì‹ (1,3,5ì°¨)              â”‚
â”‚ â€¢ ê³„ìˆ˜: Â±1                                             â”‚
â”‚ â€¢ í•™ìŠµ ë‚œì´ë„: ë†’ìŒ (ìˆ¨ê²¨ì§„ êµ¬ì¡°)                        â”‚
â”‚ â€¢ í¬ê¸°: ~10MB                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸš€ ì‹¤í–‰ ê¶Œì¥ì‚¬í•­:

â€¢ n=10/30: ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥ (~1ë¶„)
â€¢ n=128: ì¶©ë¶„í•œ ì‹œê°„ í• ë‹¹ í•„ìš” (~30ë¶„-1ì‹œê°„)
  â±ï¸  ê¸´ í•™ìŠµì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ ê¶Œì¥:
      nohup ë˜ëŠ” tmux/screen ì‚¬ìš©
      ë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ í›„ ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§

""")

print("="*80)
